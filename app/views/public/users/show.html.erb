<div class="container">
  <div class="mypage">
    <div class="profile-box">
      <div class="profile">
        <% @user ||= current_user %>
        <div>
          <%= image_tag 'default.png', size: '100x100', class:"icon" %>
        </div>
        <div>
          <h1><%= @user.name %></h1>
          <ul>
            <li>
              <%= link_to edit_user_registration_path do %><span class="material-icons md-dark">manage_accounts</span><% end %>
            </li>
            <li>
              <span class="material-icons md-dark">photo_camera</span>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="album">
      <div class="modalopen">
        wrashibe
      </div>
      <img id="main-image">

      <ul class="thumbnails">
      </ul>
    </div>
  </div>

  <div id="modal2" class="hidden" >
    <h1>Warashibe アイテム</h1>
    <p>Warashibeを開始するにあたり一番最初の交換アイテムとなります。
    こちらのアイテムは一度決定すると二度と変更できません。</p>
    <%= form_with model: @item do |f| %>
      <div class="field">
        <%= f.label :name %><br />
        <%= f.text_field :name, :placeholder => "Enter your Item...", autofocus: true %>
      </div>
      <div class="field">
        <%= f.label :info %><br />
        <%= f.text_area :info, :placeholder => "Enter your Item info...", autofocus: true, autocomplete: "email"  %>
      </div>
    <% end %>
    <div class="shut">
      閉じる
    </div>
  </div>
</div>

<div class="mask hidden"></div>

<%= javascript_include_tag "login.js" %>
<script>
  {
    const images = [
      '/assets/pic00.png',
      '/assets/pic01.png',
      '/assets/pic02.png',
      '/assets/pic03.png',
      '/assets/pic04.png',
      '/assets/pic05.png',
      '/assets/pic06.png',
      '/assets/pic07.png',
    ];

    let currentIndex = 0;

    const mainImage = document.getElementById('main-image');
    mainImage.src = images[currentIndex];

    images.forEach((image, index) =>{
      const img = document.createElement('img');
      img.src = image;

      const li = document.createElement('li');
      if (index == currentIndex) {
        li.classList.add('current');
      }

      li.addEventListener('click',()=>{
        mainImage.src = image;
        const thumbnails = document.querySelectorAll('.thumbnails > li');
        thumbnails[currentIndex].classList.remove('current');
        currentIndex = index;
        thumbnails[currentIndex].classList.add('current');
      });

      li.appendChild(img);
      document.querySelector('.thumbnails').appendChild(li);
    });
  }
</script>